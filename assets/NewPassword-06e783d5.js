import{_ as l,o as c,g as p,i as o,l as d,v as i,q as h,u}from"./index-2aa79ce7.js";const w={data(){return{messageError:"",password:"",confirmPassword:"",isOk:!1,token:"",checkResetToken:[]}},created(){this.token=this.$route.params.token},methods:{checkToken(){fetch("http://localhost:5000/users").then(e=>{if(e.ok)return e.json();throw new Error("Erro en la solucitud")}).then(e=>{this.checkResetToken=e.filter(s=>s.reset_token),this.checkResetToken.length==0&&(alert("El Token para el cambio de contraseña ha expirado."),this.$router.push({name:"home"}))}).catch(e=>{console.error("Error: ",e)})},validarPass(){this.password===this.confirmPassword?this.isOk=!0:this.isOk=!1},resetPassword(){const e=this.password;fetch(`http://localhost:5000/new-password/${this.token}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})}).then(s=>{s.ok&&(this.token="",this.$router.push({name:"home"}))}).catch(s=>{console.error("Error:",s)})}},mounted(){this.checkToken()}},n=e=>(h("data-v-16fb5a86"),e=e(),u(),e),f={class:"wrapper"},_={class:"container"},k={class:"container-password"},m=n(()=>o("h2",null,"Restablecer Contraseña",-1)),v={class:"form-group"},P=n(()=>o("label",{for:"password"},"Nueva Contraseña",-1)),b={class:"form-group"},T=n(()=>o("label",{for:"confirmPassword"},"Confirmar Contraseña",-1)),y=["disabled"];function g(e,s,C,E,a,t){return c(),p("div",f,[o("div",_,[o("div",k,[m,o("form",null,[o("div",v,[P,d(o("input",{type:"password",id:"password","onUpdate:modelValue":s[0]||(s[0]=r=>a.password=r),required:"",onInput:s[1]||(s[1]=(...r)=>t.validarPass&&t.validarPass(...r))},null,544),[[i,a.password]])]),o("div",b,[T,d(o("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":s[2]||(s[2]=r=>a.confirmPassword=r),required:"",onInput:s[3]||(s[3]=(...r)=>t.validarPass&&t.validarPass(...r))},null,544),[[i,a.confirmPassword]])]),o("button",{type:"button",class:"btn",onClick:s[4]||(s[4]=(...r)=>t.resetPassword&&t.resetPassword(...r)),disabled:!a.isOk},"Restablecer Contraseña",8,y)])])])])}const I=l(w,[["render",g],["__scopeId","data-v-16fb5a86"]]);export{I as default};
